"use strict";
var Promise = require('bluebird');
var fs = require('fs');
var loglevel = require('loglevel');
var log = loglevel.getLogger('ensime.startup');
var fsWriteFile = fs.writeFile;
/**
 * Promisified file io
 */
exports.writeFile = Promise.promisify(fsWriteFile);
exports.readFile = Promise.promisify(fs.readFile);
function ensureExists(path) {
    return new Promise(function (resolve, reject) {
        log.trace('ensureExists called', path);
        fs.exists(path, function (exists) {
            if (!exists) {
                fs.mkdir(path, function (err) {
                    if (err) {
                        console.log(err);
                        reject(err);
                    }
                    else {
                        resolve(path);
                    }
                });
            }
            else {
                resolve(path);
            }
        });
    });
}
exports.ensureExists = ensureExists;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9maWxlLXV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFPLE9BQU8sV0FBVyxVQUFVLENBQUMsQ0FBQztBQUNyQyxJQUFPLEVBQUUsV0FBVyxJQUFJLENBQUMsQ0FBQztBQUMxQixJQUFPLFFBQVEsV0FBVyxVQUFVLENBQUMsQ0FBQztBQUV0QyxJQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFFakQsSUFBTSxXQUFXLEdBQTJGLEVBQUUsQ0FBQyxTQUFTLENBQUE7QUFFeEg7O0dBRUc7QUFDVSxpQkFBUyxHQUErQyxPQUFPLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFBO0FBQ3RGLGdCQUFRLEdBQXdDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0FBRTNGLHNCQUE2QixJQUFZO0lBQ3ZDLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU8sRUFBRSxNQUFNO1FBQ2pDLEdBQUcsQ0FBQyxLQUFLLENBQUMscUJBQXFCLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDdEMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsVUFBQyxNQUFNO1lBQ3JCLEVBQUUsQ0FBQSxDQUFDLENBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDWixFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxVQUFDLEdBQUc7b0JBQ2pCLEVBQUUsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7d0JBQ1AsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTt3QkFDaEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUNkLENBQUM7b0JBQUMsSUFBSSxDQUFDLENBQUM7d0JBQ04sT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUNoQixDQUFDO2dCQUNILENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNOLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNoQixDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFsQmUsb0JBQVksZUFrQjNCLENBQUEiLCJmaWxlIjoibGliL2ZpbGUtdXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XG5pbXBvcnQgZnMgPSByZXF1aXJlKCdmcycpO1xuaW1wb3J0IGxvZ2xldmVsID0gcmVxdWlyZSgnbG9nbGV2ZWwnKTtcblxuY29uc3QgbG9nID0gbG9nbGV2ZWwuZ2V0TG9nZ2VyKCdlbnNpbWUuc3RhcnR1cCcpO1xuXG5jb25zdCBmc1dyaXRlRmlsZSA6IChmaWxlbmFtZTogc3RyaW5nLCBkYXRhOiBhbnksIGNhbGxiYWNrOiAoZXJyOiBOb2RlSlMuRXJybm9FeGNlcHRpb24pID0+IHZvaWQpID0+IHZvaWQgPSBmcy53cml0ZUZpbGVcblxuLyoqXG4gKiBQcm9taXNpZmllZCBmaWxlIGlvXG4gKi9cbmV4cG9ydCBjb25zdCB3cml0ZUZpbGUgOiAoZjogU3RyaW5nLCBkYXRhOiBhbnkpID0+IFByb21pc2VMaWtlPHt9PiA9IFByb21pc2UucHJvbWlzaWZ5KGZzV3JpdGVGaWxlKVxuZXhwb3J0IGNvbnN0IHJlYWRGaWxlIDogKGY6IFN0cmluZykgPT4gUHJvbWlzZUxpa2U8QnVmZmVyPiA9IFByb21pc2UucHJvbWlzaWZ5KGZzLnJlYWRGaWxlKVxuXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlRXhpc3RzKHBhdGg6IHN0cmluZykgOiBQcm9taXNlTGlrZTx7fT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGxvZy50cmFjZSgnZW5zdXJlRXhpc3RzIGNhbGxlZCcsIHBhdGgpXG4gICAgZnMuZXhpc3RzKHBhdGgsIChleGlzdHMpID0+IHtcbiAgICAgIGlmKCEgZXhpc3RzKSB7XG4gICAgICAgIGZzLm1rZGlyKHBhdGgsIChlcnIpID0+IHtcbiAgICAgICAgICBpZihlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKHBhdGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHBhdGgpO1xuICAgICAgfSBcbiAgICB9KTtcbiAgfSk7XG59Il19
